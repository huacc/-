# 心理分析系统 - 产品需求文档 v2.0

> **版本**: v2.0
> **文档类型**: 产品需求文档 (PRD)
> **创建日期**: 2026-01-30
> **状态**: Draft
> **重要说明**: 本文档只描述需求，不涉及技术实现细节

---

## 文档说明

本文档是心理分析系统的**完整产品需求文档**，基于用户反馈进行了核心理解修正。文档聚焦于**需求定义**，不涉及技术实现方案。

**核心修正点**:
- 通用分析引擎（不是固定三阶段）
- 提示词管理系统（不是工作流编排）
- 证据链与推理追溯（不是防伪造）
- 元本体体系（不是固定三层结构）
- 增加视频支持
- GraphQL动态查询能力

---

## 目录

1. [产品概述](#1-产品概述)
2. [核心能力域](#2-核心能力域)
3. [功能需求详细定义](#3-功能需求详细定义)
4. [质量标准](#4-质量标准)
5. [技术约束](#5-技术约束)

---

## 1. 产品概述

### 1.1 产品定位

**基于多模态输入的场景化心理分析系统**

通过分析多模态数据（文字、对话、图片、视频、文档），提取人物心理特征，生成专业的分析报告。

### 1.2 核心价值主张

1. **通用分析引擎**: 支持多种编排方式（并发、顺序、条件分支），不限于固定阶段
2. **场景模板驱动**: 提供元场景模板框架，支持灵活的场景定义
3. **多模态理解**: 处理文字、对话、图片、视频，从外在表征推断心理特征
4. **证据链与推理追溯**: 梳理证据链，使分析过程可追溯，推理链路可观察
5. **元本体体系**: 提供元本体框架，支持用户按照元本体体系构建心理模型
6. **知识图谱与语义查询**: 支持GraphQL动态查询，在语义网情况下动态理解上下文
7. **提示词管理系统**: 提示词模板管理、版本管理、工程配置

### 1.3 目标用户

- **心理分析专家**: 需要工具辅助进行心理分析
- **审讯人员**: 需要分析嫌疑人的心理状态
- **HR专业人员**: 需要评估候选人的心理特征
- **风险评估人员**: 需要识别潜在风险

### 1.4 使用场景

- 审讯分析场景
- 人才评估场景
- 风险识别场景
- 心理咨询场景
- 其他自定义场景

---

## 2. 核心能力域

### 2.1 能力域全景图

本系统包含以下10个核心能力域：

1. **通用分析引擎**: 支持多种编排方式的分析执行引擎
2. **提示词管理系统**: 提示词模板的管理和版本控制
3. **证据链与推理追溯**: 分析过程的可追溯性和推理链路展示
4. **元本体体系**: 心理模型的本体框架和构建支持
5. **多模态输入处理**: 文字、对话、图片、视频、文档的输入处理
6. **知识图谱与语义查询**: 知识图谱构建和GraphQL动态查询
7. **模型管理与调度**: 多模型提供商的管理和智能调度
8. **场景模板管理**: 场景模板的定义、配置和管理
9. **报告生成**: 分析报告的生成和输出
10. **用户权限管理**: 用户、用户组和权限的管理

### 2.2 能力域关系

#### 2.2.1 场景化分析流程

```
用户输入（多模态）
    ↓
[多模态输入处理] ← [元本体体系]（提供特征提取规范）
    ↓
结构化数据 + 证据索引（符合本体格式）
    ↓
[场景模板管理] → 选择分析场景
    ↓
[通用分析引擎] ← [提示词管理系统]（引用本体和知识）
    ↓              ↓
    ├─ [模型管理与调度] → 调用LLM/VLM
    ├─ [元本体体系] → 提供心理模型定义
    └─ [知识图谱与语义查询] → RAG检索相关知识
    ↓
分析结果 + 推理链条
    ↓
[证据链与推理追溯] → 验证和追溯
    ↓
[报告生成] ← [场景模板管理]（关联报告模板）
    ↓
输出报告
```

#### 2.2.2 本体与知识构建流程

```
用户输入（构建需求）
    ↓
[提示词管理系统] ← [元本体体系]（提供本体框架）
    ↓
构建提示词
    ↓
[模型管理与调度] → 调用LLM
    ↓
生成的本体/知识
    ↓
[元本体体系] / [知识图谱与语义查询]
    ↓
存储并供分析使用
```

**关键说明**：
- **元本体是Schema，知识图谱是Data**：元本体定义心理模型的结构，知识图谱存储具体的知识实例
- **分析与构建分离**：场景化分析使用通用分析引擎，本体/知识构建直接使用模型调度
- **知识参与方式**：通过RAG（检索增强生成）方式，在分析时动态检索相关知识

---

## 3. 功能需求详细定义

### 优先级说明

本系统采用分阶段实施策略，功能需求按照以下优先级划分：

**Phase 1（P0级）- 基础设施构建**
目标：构建通用的心理学本体和知识库，让领域专家可以用起来
- P0-1: 3.7 模型管理与调度
- P0-2: 3.2 提示词管理系统
- P0-3: 3.4 元本体体系
- P0-4: 3.6 知识图谱与语义查询

**Phase 2（P1/P2级）- 分析功能开发**
目标：基于已构建的本体和知识库，开发场景化分析功能
- P1-1: 3.8 场景模板管理
- P1-2: 3.1 通用分析引擎
- P1-3: 3.9 报告生成
- P1-4: 3.3 证据链与推理追溯
- P2-1: 3.5 多模态输入处理

**Phase 3（P3级）- 系统管理**
目标：完善系统的用户和权限管理
- P3-1: 3.10 用户权限管理

---

### 3.1 通用分析引擎（P1-2）

#### 3.1.1 需求背景

不同场景的分析逻辑不同，需要一个通用的分析引擎，支持多种编排方式（并发、顺序、条件分支等），而不是固定的三阶段或四阶段。

#### 3.1.2 功能需求

**FR-3.1.1: 输入数据获取能力**

需求描述：
- 系统应能够从多模态输入处理模块获取结构化数据
- 系统应能够获取证据索引表
- 系统应能够获取用户的自定义输入参数

验收标准：
- 能够正确获取所有类型的输入数据
- 数据获取失败时有明确的错误提示
- 数据获取响应时间 < 100ms

**FR-3.1.2: 输出数据存储能力**

需求描述：
- 系统应能够存储分析过程中的中间结果
- 系统应能够存储最终的分析结果
- 系统应能够存储推理链条和证据链

验收标准：
- 所有中间结果和最终结果都能正确存储
- 存储失败时有重试机制
- 数据存储响应时间 < 200ms

**FR-3.1.3: LLM调用能力**

需求描述：
- 系统应能够调用多种LLM模型
- 系统应能够传递提示词和参数
- 系统应能够处理LLM的响应结果
- 系统应能够处理LLM调用失败的情况

验收标准：
- 支持至少12种LLM模型提供商
- LLM调用成功率 ≥ 95%
- LLM调用失败时有重试机制（最多3次）
- 调用超时时间可配置（默认60秒）

**FR-3.1.4: 提示词模板加载能力**

需求描述：
- 系统应能够从提示词管理系统加载提示词模板
- 系统应能够动态替换提示词中的变量
- 系统应能够组合多个提示词模板

验收标准：
- 提示词模板加载成功率 = 100%
- 变量替换准确率 = 100%
- 模板加载响应时间 < 50ms

**FR-3.1.5: 多种编排方式支持**

需求描述：
- 系统应支持并发执行（多个分析步骤同时进行）
- 系统应支持顺序执行（按照指定顺序依次执行）
- 系统应支持条件分支（根据条件选择不同的执行路径）
- 系统应支持循环执行（重复执行某些步骤直到满足条件）
- 系统应支持任务绑定（将引擎运行绑定到特定任务）

验收标准：
- 支持至少4种编排方式
- 编排配置可以保存和复用
- 编排执行准确率 = 100%
- 编排执行日志完整可查

**FR-3.1.6: 引擎边界定义**

需求描述：
- 系统应明确通用分析引擎仅用于场景化心理分析任务
- 系统应确保引擎不处理本体构建任务
- 系统应确保引擎不处理知识构建任务
- 本体和知识的构建任务应直接使用模型调度和提示词系统

验收标准：
- 引擎调用日志验证无非分析任务
- 引擎与构建域耦合度 = 0（通过独立接口交互）
- 构建任务闭环：用户输入 → 提示词 → 模型调度 → 存储
- 分析任务闭环：输入数据 → 场景模板 → 引擎执行 → 输出报告

#### 3.1.3 验收标准

- 通用分析引擎能够正确获取输入数据
- 通用分析引擎能够正确存储输出数据
- 通用分析引擎能够成功调用LLM
- 通用分析引擎能够正确加载提示词模板
- 通用分析引擎支持多种编排方式
- 引擎运行可以绑定到任务
- 引擎执行成功率 ≥ 95%

---

### 3.2 提示词管理系统（P0-2）

#### 3.2.1 需求背景

提示词是引导LLM进行分析的关键，需要一个专门的系统来管理提示词模板，支持版本控制和工程化配置。

#### 3.2.2 功能需求

**FR-3.2.1: 提示词模板管理**

需求描述：
- 系统应能够创建提示词模板
- 系统应能够编辑提示词模板
- 系统应能够删除提示词模板
- 系统应能够查询提示词模板
- 系统应能够复制提示词模板

验收标准：
- 提示词模板CRUD功能完整
- 提示词模板支持变量占位符
- 提示词模板支持多语言
- 提示词模板可以导入导出

**FR-3.2.2: 提示词模板存储**

需求描述：
- 系统应能够持久化存储提示词模板
- 系统应能够快速检索提示词模板
- 系统应能够按照分类组织提示词模板
- 系统应能够支持提示词模板的标签管理

验收标准：
- 提示词模板存储可靠性 = 100%
- 提示词模板检索响应时间 < 100ms
- 提示词模板支持至少3级分类
- 提示词模板支持多标签

**FR-3.2.3: 提示词版本管理**

需求描述：
- 系统应能够记录提示词模板的所有版本
- 系统应能够比较不同版本的差异
- 系统应能够回滚到历史版本
- 系统应能够标记版本状态（草稿、测试、生产）

验收标准：
- 提示词版本记录完整
- 版本比较功能准确
- 版本回滚成功率 = 100%
- 版本状态管理清晰

**FR-3.2.4: 提示词与本体/知识的集成**

需求描述：
- 系统应支持提示词模板引用本体定义（通过变量占位符）
- 系统应支持提示词模板引用知识图谱内容（通过RAG检索）
- 系统应提供本体定义的动态注入机制
- 系统应提供知识检索结果的格式化注入

验收标准：
- 提示词可以引用本体定义的所有字段
- 知识检索结果可以正确注入到提示词中
- 本体定义变化时，提示词可以获取最新定义
- 注入机制响应时间 < 200ms
- 版本状态管理清晰

#### 3.2.3 验收标准

- 提示词管理系统功能完整
- 提示词模板存储可靠
- 提示词版本管理完善
- 系统响应时间 < 200ms

---

### 3.3 证据链与推理追溯（P1-4）

#### 3.3.1 需求背景

分析过程需要可追溯，用户需要了解分析结论是如何得出的，证据链和推理链路需要清晰展示。

#### 3.3.2 功能需求

**FR-3.3.1: 证据链梳理**

需求描述：
- 系统应能够识别和提取所有证据
- 系统应能够为每条证据分配唯一标识
- 系统应能够建立证据之间的关联关系
- 系统应能够追踪证据的来源

验收标准：
- 所有证据都被正确识别
- 证据标识唯一且稳定
- 证据关联关系准确
- 证据来源可追溯

**FR-3.3.2: 分析过程可追溯**

需求描述：
- 系统应记录分析的每个步骤
- 系统应记录每个步骤使用的证据
- 系统应记录每个步骤的中间结果
- 系统应记录每个步骤的执行时间

验收标准：
- 分析步骤记录完整
- 证据使用记录准确
- 中间结果可查询
- 执行时间记录精确

**FR-3.3.3: 推理链路可观察**

需求描述：
- 系统应展示从证据到结论的完整推理路径
- 系统应展示推理过程中使用的规则
- 系统应展示推理过程中的置信度变化
- 系统应支持推理链路的可视化展示

验收标准：
- 推理路径完整清晰
- 规则使用记录准确
- 置信度计算可解释
- 可视化展示直观易懂

**FR-3.3.4: 关系和依赖项清晰**

需求描述：
- 系统应展示证据之间的关系
- 系统应展示推理步骤之间的依赖关系
- 系统应展示结论之间的支持关系
- 系统应支持关系图的导出

验收标准：
- 证据关系展示准确
- 依赖关系展示清晰
- 支持关系展示完整
- 关系图可导出为图片或文档

#### 3.3.3 验收标准

- 证据链梳理完整
- 分析过程可追溯
- 推理链路可观察
- 关系和依赖项清晰
- 追溯功能响应时间 < 500ms

---

### 3.4 元本体体系（P0-3）

#### 3.4.1 需求背景

心理分析需要基于心理学理论和模型，元本体体系提供了一个标准化的框架，用户可以基于此框架构建自己的心理模型。

#### 3.4.2 功能需求

**FR-3.4.1: 元本体体系框架**

需求描述：
- 系统应提供元本体的基础结构定义
- 系统应提供元本体的扩展机制
- 系统应提供元本体的验证规则
- 系统应提供元本体的文档和示例

验收标准：
- 元本体框架结构清晰
- 扩展机制灵活易用
- 验证规则完整准确
- 文档和示例丰富

**FR-3.4.2: 用户构建心理模型支持**

需求描述：
- 系统应支持用户基于元本体创建自定义心理模型
- 系统应支持用户定义心理特征维度
- 系统应支持用户定义诊断规则
- 系统应支持用户定义推理规则

验收标准：
- 用户可以创建自定义心理模型
- 心理特征维度定义灵活
- 诊断规则定义清晰
- 推理规则定义准确

**FR-3.4.3: 不是固定结构**

需求描述：
- 系统不应限制用户只能使用固定的三层或四层结构
- 系统应支持用户自定义本体层次结构
- 系统应支持用户自定义本体关系类型
- 系统应支持用户自定义本体属性

验收标准：
- 本体结构可自定义
- 层次结构不受限制
- 关系类型可扩展
- 属性定义灵活

**FR-3.4.4: 元本体与知识图谱的关系**

需求描述：
- 系统应明确元本体是Schema（元数据），知识图谱是Data（实例数据）
- 系统应支持基于元本体定义创建知识图谱实例
- 系统应支持元本体定义的变更传播到知识图谱
- 系统应提供元本体到知识图谱的映射机制

验收标准：
- 元本体与知识图谱的关系清晰明确
- 知识图谱实例符合元本体定义
- 元本体变更时，知识图谱可以感知并调整
- 映射机制准确率 = 100%

#### 3.4.3 验收标准

- 元本体体系框架完整
- 用户可以基于框架构建心理模型
- 本体结构不受固定限制
- 系统提供充分的文档和示例

---

### 3.5 多模态输入处理（P2-1）

#### 3.5.1 需求背景

心理分析需要处理多种类型的输入数据，包括文字、对话、图片、视频和文档。

#### 3.5.2 功能需求

**FR-3.5.1: 文字输入支持**

需求描述：
- 系统应支持用户直接输入文本
- 系统应支持文本的格式化显示
- 系统应支持文本的编辑和修改
- 系统应支持文本的保存和加载

验收标准：
- 文本输入功能完整
- 文本格式化正确
- 文本编辑流畅
- 文本保存可靠

**FR-3.5.2: 对话输入支持**

需求描述：
- 系统应支持对话格式的输入
- 系统应能够识别对话的角色
- 系统应能够识别对话的轮次
- 系统应能够提取对话的关键信息

验收标准：
- 对话格式识别准确率 ≥ 90%
- 角色识别准确率 ≥ 95%
- 轮次识别准确率 ≥ 95%
- 关键信息提取准确率 ≥ 85%

**FR-3.5.3: 图片输入支持**

需求描述：
- 系统应支持常见图片格式（JPEG、PNG、GIF、BMP等）
- 系统应能够提取图片中的视觉信息
- 系统应能够识别图片中的人物表情
- 系统应能够识别图片中的场景信息

验收标准：
- 支持至少5种图片格式
- 图片上传成功率 ≥ 95%
- 视觉信息提取准确率 ≥ 80%
- 表情识别准确率 ≥ 75%

**FR-3.5.4: 视频输入支持**

需求描述：
- 系统应支持常见视频格式（MP4、AVI、MOV等）
- 系统应能够提取视频中的关键帧
- 系统应能够识别视频中的人物动作
- 系统应能够识别视频中的语音内容

验收标准：
- 支持至少3种视频格式
- 视频上传成功率 ≥ 90%
- 关键帧提取准确率 ≥ 85%
- 动作识别准确率 ≥ 70%
- 语音识别准确率 ≥ 85%

**FR-3.5.5: 文档输入支持**

需求描述：
- 系统应支持PDF文档
- 系统应支持Word文档
- 系统应支持纯文本文件
- 系统应能够提取文档中的文本和图片

验收标准：
- 支持PDF、Word、TXT格式
- 文档解析成功率 ≥ 95%
- 文本提取准确率 ≥ 95%
- 图片提取成功率 ≥ 90%

**FR-3.5.6: 提取结果标准化**

需求描述：
- 系统应将所有多模态输入的提取结果标准化为统一格式
- 系统应确保提取结果符合元本体定义的结构
- 系统应支持提取结果直接导入分析引擎或知识图谱
- 系统应提供提取结果的验证机制

验收标准：
- 提取结果格式统一（JSON结构）
- 提取结果符合元本体定义的字段要求
- 提取结果可以无缝导入分析引擎
- 验证机制准确率 = 100%

#### 3.5.3 验收标准

- 支持文字、对话、图片、视频、文档输入
- 各类输入处理准确率达标
- 输入处理响应时间合理
- 输入数据存储可靠

---

### 3.6 知识图谱与语义查询（P0-4）

#### 3.6.1 需求背景

知识图谱可以提供结构化的知识表示，支持复杂的语义查询和推理。Cypher查询语言可以提供强大的图遍历和查询能力，结合大模型可以实现动态查询生成。

#### 3.6.2 功能需求

**FR-3.6.1: 知识图谱构建**

需求描述：
- 系统应支持创建知识节点
- 系统应支持创建知识关系
- 系统应支持知识属性定义
- 系统应支持知识图谱的可视化

验收标准：
- 知识节点创建成功率 = 100%
- 知识关系创建准确率 = 100%
- 知识属性定义灵活
- 知识图谱可视化清晰

**FR-3.6.2: Cypher查询能力**

需求描述：
- 系统应支持使用Cypher查询Neo4j知识图谱
- 系统应支持复杂的图遍历和嵌套查询
- 系统应支持查询结果的过滤和排序
- 系统应支持查询结果的分页

验收标准：
- Cypher查询功能完整
- 嵌套查询支持深度 ≥ 5层
- 图遍历和路径查询准确
- 过滤和排序功能准确
- 分页功能正常

**FR-3.6.3: 智能查询生成**

需求描述：
- 系统应能够理解用户的自然语言查询意图
- 系统应提供预定义的查询工具集（Function Calling）
- 系统应通过LLM决定调用哪些查询工具及参数
- 系统应提供fallback机制：动态生成失败时回退到静态查询

验收标准：
- 自然语言意图理解准确率 ≥ 85%
- 查询工具调用准确率 ≥ 90%
- fallback机制触发成功率 = 100%
- 静态查询准确率 = 100%（作为基础保障）

**FR-3.6.4: 语义网动态上下文理解**

需求描述：
- 系统应能够理解查询的上下文
- 系统应能够根据上下文调整查询策略
- 系统应能够处理模糊查询
- 系统应能够提供查询建议

验收标准：
- 上下文理解准确率 ≥ 80%
- 查询策略调整合理
- 模糊查询处理准确率 ≥ 75%
- 查询建议相关性 ≥ 80%

**FR-3.6.5: 知识图谱参与分析（RAG机制）**

需求描述：
- 系统应支持在分析过程中动态检索相关知识
- 系统应支持基于分析上下文的知识检索
- 系统应支持将检索到的知识注入到提示词中
- 系统应支持知识检索结果的相关性排序

验收标准：
- 知识检索响应时间 < 500ms
- 检索结果相关性 ≥ 80%
- 知识注入到提示词的准确率 = 100%
- 支持至少3种检索策略（关键词、语义、混合）

#### 3.6.3 验收标准

- 知识图谱构建功能完整
- Cypher查询功能完整
- 大模型动态生成Cypher查询准确
- 语义网上下文理解准确
- 查询响应时间 < 1秒

---

### 3.7 模型管理与调度（P0-1）

#### 3.7.1 需求背景

系统需要支持多种LLM和VLM模型，需要一个统一的管理和调度系统。

#### 3.7.2 功能需求

**FR-3.7.1: 多模型提供商支持**

需求描述：
- 系统应支持至少12种LLM模型提供商
- 系统应支持至少3种VLM模型提供商
- 系统应提供统一的模型调用接口
- 系统应支持模型的热插拔

验收标准：
- 支持12种以上LLM提供商
- 支持3种以上VLM提供商
- 统一接口功能完整
- 模型热插拔无需重启系统

**FR-3.7.2: 模型配置管理**

需求描述：
- 系统应支持配置模型的API密钥
- 系统应支持配置模型的端点地址
- 系统应支持配置模型的默认参数
- 系统应支持配置模型的使用限制

验收标准：
- 模型配置界面友好
- 配置信息加密存储
- 配置修改实时生效
- 使用限制准确执行

**FR-3.7.3: 智能模型调度**

需求描述：
- 系统应能够根据任务类型选择合适的模型
- 系统应能够根据模型负载进行调度
- 系统应能够根据成本进行模型选择
- 系统应能够根据性能进行模型选择

验收标准：
- 模型选择准确率 ≥ 85%
- 负载均衡效果良好
- 成本优化效果明显
- 性能优化效果明显

**FR-3.7.4: 模型性能监控**

需求描述：
- 系统应监控模型的响应时间
- 系统应监控模型的成功率
- 系统应监控模型的Token使用量
- 系统应监控模型的成本

验收标准：
- 性能监控实时准确
- 监控数据可视化展示
- 监控告警及时
- 监控数据可导出

#### 3.7.3 验收标准

- 多模型提供商支持完整
- 模型配置管理灵活
- 智能模型调度准确
- 模型性能监控完善

---

### 3.8 场景模板管理（P1-1）

#### 3.8.1 需求背景

不同的分析场景需要不同的分析逻辑和配置，场景模板提供了标准化的场景定义方式。

#### 3.8.2 功能需求

**FR-3.8.1: 场景模板定义**

需求描述：
- 系统应支持定义场景的基本信息
- 系统应支持定义场景的分析目标
- 系统应支持定义场景的输入要求
- 系统应支持定义场景的输出格式

验收标准：
- 场景模板定义完整
- 场景模板结构清晰
- 场景模板可复用
- 场景模板可导入导出

**FR-3.8.2: 场景模板配置**

需求描述：
- 系统应支持配置场景使用的提示词模板
- 系统应支持配置场景使用的知识库
- 系统应支持配置知识库的使用方式（RAG检索策略、检索数量、相关性阈值）
- 系统应支持配置场景使用的报告模板
- 系统应支持配置场景的API发布设置

验收标准：
- 场景配置界面友好
- 配置项完整准确（包括RAG配置）
- 配置修改实时生效
- 配置可保存为预设
- RAG配置支持至少3种检索策略

**FR-3.8.3: 提示词工程参数配置**

需求描述：
- 系统应支持配置每个分析阶段的Temperature参数
- 系统应支持配置每个分析阶段的Max Tokens参数
- 系统应支持配置停止词（可选）
- 系统应支持配置其他采样参数（top_p、frequency_penalty等）

验收标准：
- 所有提示词工程参数可配置
- 参数配置与分析阶段绑定
- 参数配置实时生效
- 提供参数配置建议（基于实验结果）

**FR-3.8.4: 分析引擎流程配置**

需求描述：
- 系统应支持配置分析引擎的执行阶段（如：表征提取、心理特征分析、报告输出）
- 系统应支持为每个阶段选择使用的模型
- 系统应支持启用/禁用特定阶段
- 系统应支持配置阶段之间的数据传递

验收标准：
- 分析引擎流程可灵活配置
- 每个阶段可独立选择模型
- 阶段可以启用/禁用
- 提供模型选择建议（质量优先、速度优先、成本优先、平衡选择）

**FR-3.8.5: 场景模板管理**

需求描述：
- 系统应支持创建场景模板
- 系统应支持编辑场景模板
- 系统应支持删除场景模板
- 系统应支持复制场景模板
- 系统应支持场景模板的版本管理

验收标准：
- 场景模板CRUD功能完整
- 场景模板复制准确
- 场景模板版本管理完善
- 场景模板可分类组织

#### 3.8.3 验收标准

- 场景模板定义完整
- 场景模板配置灵活
- 场景模板管理便捷
- 至少提供5个预置场景模板

---

### 3.9 报告生成（P1-3）

#### 3.9.1 需求背景

分析完成后，系统需要根据**报告模板**生成Markdown格式的分析报告。报告模板定义了报告的章节结构和格式要求，作为提示词的一部分指导LLM生成符合规范的报告内容。

#### 3.9.2 功能需求

**FR-3.9.1: 基于模板的报告生成**

需求描述：
- 系统应能够获取场景关联的报告模板
- 系统应能够将报告模板嵌入到提示词中
- 系统应能够调用LLM生成符合模板格式的Markdown报告

验收标准：
- 报告模板加载成功率 = 100%
- 生成的报告符合Markdown格式规范
- 报告包含模板定义的所有章节
- 报告生成成功率 ≥ 95%

**FR-3.9.2: Markdown报告渲染**

需求描述：
- 系统应能够渲染Markdown格式的报告内容
- 系统应支持标准Markdown语法（标题、列表、表格、引用等）
- 系统应支持证据ID的交互式链接（点击查看证据详情）
- 系统应支持推理链的交互式查看

验收标准：
- Markdown渲染准确率 = 100%
- 证据ID可点击并跳转到证据详情
- 推理链可点击并展开查看
- 报告渲染响应时间 < 500ms

**FR-3.9.3: 报告导出**

需求描述：
- 系统应支持报告的Markdown格式导出
- 系统应支持报告的本地保存
- 导出的文件应包含完整的报告内容

验收标准：
- Markdown导出成功率 = 100%
- 导出的文件可被标准Markdown编辑器打开
- 导出文件命名规范（包含人物姓名和时间戳）

#### 3.9.3 验收标准

- 报告基于模板生成
- 报告格式为Markdown
- 报告可正常渲染和查看
- 报告可导出为Markdown文件
- 报告生成时间 < 30秒

---

### 3.10 用户权限管理（P3-1）

#### 3.10.1 需求背景

系统需要支持多用户使用，不同用户和用户组应该有不同的权限，确保数据安全和操作规范。

#### 3.10.2 功能需求

**FR-3.10.1: 用户管理**

需求描述：
- 系统应支持创建用户账号
- 系统应支持编辑用户信息
- 系统应支持删除用户账号
- 系统应支持查询用户列表
- 系统应支持为用户分配用户组

验收标准：
- 用户管理CRUD功能完整
- 用户信息包含：用户名、邮箱、所属用户组、状态
- 用户密码加密存储
- 用户列表支持搜索和筛选

**FR-3.10.2: 用户组管理**

需求描述：
- 系统应支持创建用户组（角色）
- 系统应支持编辑用户组信息
- 系统应支持删除用户组
- 系统应支持查询用户组列表
- 系统应提供预置用户组（系统管理员、分析师、只读用户）

验收标准：
- 用户组管理CRUD功能完整
- 用户组信息包含：组名、描述、成员数量
- 预置用户组不可删除
- 用户组列表支持搜索

**FR-3.10.3: 权限管理**

需求描述：
- 系统应支持为用户组配置权限
- 系统应支持为单个用户配置权限
- 系统应提供权限矩阵视图（资源 × 操作）
- 系统应支持的权限类型：可查看、可编辑、可删除

验收标准：
- 权限配置界面清晰易用
- 权限矩阵包含所有系统资源
- 权限配置实时生效
- 支持批量权限配置

#### 3.10.3 验收标准

- 用户管理功能完整
- 用户组管理功能完整
- 权限管理功能完整
- 权限控制准确有效
- 系统响应时间 < 500ms

---

## 4. 质量标准

### 4.1 功能质量标准

| 质量指标 | 标准值 |
|---------|--------|
| 功能完整性 | ≥ 95% |
| 功能准确性 | ≥ 90% |
| 功能可用性 | ≥ 99% |
| 功能稳定性 | ≥ 99% |

### 4.2 性能质量标准

| 性能指标 | 标准值 |
|---------|--------|
| 系统响应时间 | < 2秒 |
| 分析处理时间 | < 60秒 |
| 并发处理能力 | ≥ 100并发 |
| 数据处理吞吐量 | ≥ 1000条/小时 |

### 4.3 数据质量标准

| 数据指标 | 标准值 |
|---------|--------|
| 数据准确性 | ≥ 95% |
| 数据完整性 | = 100% |
| 数据一致性 | = 100% |
| 数据可追溯性 | = 100% |

### 4.4 用户体验质量标准

| 体验指标 | 标准值 |
|---------|--------|
| 界面友好性 | ≥ 4/5分 |
| 操作便捷性 | ≥ 4/5分 |
| 学习曲线 | ≤ 2小时 |
| 用户满意度 | ≥ 4/5分 |

---

## 5. 技术约束

### 5.1 性能约束

- 单次分析响应时间应 < 60秒
- 系统并发处理能力应 ≥ 100并发
- 数据库查询响应时间应 < 100ms
- API接口响应时间应 < 500ms

### 5.2 安全约束

- 所有敏感数据必须加密存储
- 所有数据传输必须使用HTTPS
- 用户密码必须使用强加密算法
- 系统必须支持访问控制和权限管理

### 5.3 兼容性约束

- 系统应支持主流浏览器（Chrome、Firefox、Safari、Edge）
- 系统应支持移动端访问
- 系统应支持主流操作系统（Windows、macOS、Linux）
- 系统API应保持向后兼容

### 5.4 可扩展性约束

- 系统架构应支持水平扩展
- 系统应支持模块化部署
- 系统应支持插件机制
- 系统应支持第三方集成

### 5.5 可维护性约束

- 代码应遵循统一的编码规范
- 系统应提供完整的日志记录
- 系统应提供监控和告警机制
- 系统应提供完整的文档

---

**文档结束**

> **版本历史**:
> - v2.0 (2026-01-30): 基于用户反馈重新创建，核心理解修正
>
> **下一步行动**:
> 1. 评审本文档，确认需求完整性
> 2. 基于需求进行技术方案设计
> 3. 制定开发计划和里程碑
